# JWT RSA Keys Directory

## üìÅ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è RSA –∫–ª—é—á–µ–π –¥–ª—è JWT –ø–æ–¥–ø–∏—Å–∏ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

## üîê –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

- `private.pem` ‚Äî –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (—Ç–æ–ª—å–∫–æ auth-service, **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!**)
- `public.pem` ‚Äî –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (–≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã)

## üöÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é src
cd ../src

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏
php artisan jwt:generate-keys

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —ç—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cp storage/jwt/private.pem ../jwt/
cp storage/jwt/public.pem ../jwt/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod 600 ../jwt/private.pem
chmod 644 ../jwt/public.pem
```

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–ê–ñ–ù–û:

1. **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ Git!**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.gitignore`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `git status` –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

2. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   chmod 600 private.pem  # –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å
   chmod 644 public.pem   # –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å
   ```

3. **Production:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (AWS Secrets Manager, Vault)
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
   - –†–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –∫–∞–∂–¥—ã–µ 6-12 –º–µ—Å—è—Ü–µ–≤

## üê≥ Docker –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–ª—é—á–∏ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —á–µ—Ä–µ–∑ `docker-compose.yml`:

```yaml
auth-service:
  volumes:
    - ./services/auth-service/jwt/private.pem:/var/www/html/storage/jwt/private.pem:ro
    - ./services/auth-service/jwt/public.pem:/var/www/html/storage/jwt/public.pem:ro

ai-service:
  volumes:
    # –¢–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
    - ./services/auth-service/jwt/public.pem:/var/www/html/storage/jwt/public.pem:ro
```

## üîÑ –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–º–µ–Ω—ã –∫–ª—é—á–µ–π:

```bash
# 1. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–ª—é—á–∏
cd ../src
php artisan jwt:generate-keys --force

# 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–ª—é—á–∏
cp storage/jwt/*.pem ../jwt/

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
cd ../../..
docker-compose restart auth-service ai-service

# 4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å grace period –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ö–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å —Ä–∞–∑–º–µ—Ä–æ–º 4096 –±–∏—Ç (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- –ê–ª–≥–æ—Ä–∏—Ç–º: RS256 (RSA + SHA256)
- –§–æ—Ä–º–∞—Ç: PEM (Privacy Enhanced Mail)

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [../RS256_MIGRATION_GUIDE.md](../RS256_MIGRATION_GUIDE.md)

